apiVersion: v1
kind: ConfigMap
metadata:
  namespace: wiki
  name: radar-config
data:
  frequency_words.txt: |
      DeepSeek
      æ¢æ–‡é”‹

      å®‡æ ‘
      ç‹å…´å…´

      å­—èŠ‚
      bytedance
      å¼ ä¸€é¸£

      ç‰¹æ–¯æ‹‰
      é©¬æ–¯å…‹

      å¾®è½¯
      Microsoft

      è‹±ä¼Ÿè¾¾
      NVIDIA
      é»„ä»å‹‹

      AMD

      è°·æ­Œ
      google
      gemini
      deepmind

      chatgpt
      openai
      sora

      claude
      Anthropic

      iphone
      ipad
      mac
      ios

      ai
      !gai
      äººå·¥æ™ºèƒ½

      è‡ªåŠ¨é©¾é©¶

      æœºå™¨äºº


      å›½äº§èŠ¯ç‰‡
      åŠå¯¼ä½“
      ç®—åŠ›è®¾å¤‡

      ä¸­å›½

      ç¾å›½
      æ—¥æœ¬
      éŸ©å›½

      èŠ¯ç‰‡
      å…‰åˆ»æœº

      ç§‘æŠ€

      æ ¸èƒ½
      å¯æ§æ ¸èšå˜
      é”‚ç”µæ± 
      å…‰ä¼

      æŠ•èµ„
      æ²ªæŒ‡
      æ·±æŒ‡
      åˆ›ä¸šæ¿
      ç§‘åˆ›50
      çº³æ–¯è¾¾å…‹
      æ ‡æ™®
      æ—¥ç»

      web3
      BTC
      ETH
      SOL
      æ¯”ç‰¹å¸
      ä»¥å¤ªåŠ



  config.yaml: |
      app:
        version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version"
        show_version_update: false # æ§åˆ¶æ˜¾ç¤ºç‰ˆæœ¬æ›´æ–°æç¤ºï¼Œå¦‚æœ falseï¼Œåˆ™ä¸æ¥å—æ–°ç‰ˆæœ¬æç¤º

      crawler:
        request_interval: 1000 # è¯·æ±‚é—´éš”(æ¯«ç§’)
        enable_crawler: true # æ˜¯å¦å¯ç”¨çˆ¬å–æ–°é—»åŠŸèƒ½ï¼Œå¦‚æœ falseï¼Œåˆ™ç›´æ¥åœæ­¢ç¨‹åº
        use_proxy: false # æ˜¯å¦å¯ç”¨ä»£ç†ï¼Œfalse æ—¶ä¸ºå…³é—­
        default_proxy: "http://127.0.0.1:10086"

      # ğŸ”¸ dailyï¼ˆå½“æ—¥æ±‡æ€»æ¨¡å¼ï¼‰
      #   â€¢ æ¨é€æ—¶æœºï¼šæŒ‰æ—¶æ¨é€(é»˜è®¤æ¯å°æ—¶æ¨é€ä¸€æ¬¡)
      #   â€¢ æ˜¾ç¤ºå†…å®¹ï¼šå½“æ—¥æ‰€æœ‰åŒ¹é…æ–°é—» + æ–°å¢æ–°é—»åŒºåŸŸ
      #   â€¢ é€‚ç”¨åœºæ™¯ï¼šæ—¥æŠ¥æ€»ç»“ã€å…¨é¢äº†è§£å½“æ—¥çƒ­ç‚¹è¶‹åŠ¿
      #
      # ğŸ”¸ currentï¼ˆå½“å‰æ¦œå•æ¨¡å¼ï¼‰
      #   â€¢ æ¨é€æ—¶æœºï¼šæŒ‰æ—¶æ¨é€(é»˜è®¤æ¯å°æ—¶æ¨é€ä¸€æ¬¡)
      #   â€¢ æ˜¾ç¤ºå†…å®¹ï¼šå½“å‰æ¦œå•åŒ¹é…æ–°é—» + æ–°å¢æ–°é—»åŒºåŸŸ
      #   â€¢ é€‚ç”¨åœºæ™¯ï¼šå®æ—¶çƒ­ç‚¹è¿½è¸ªã€äº†è§£å½“å‰æœ€ç«çš„å†…å®¹
      #
      # ğŸ”¸ incrementalï¼ˆå¢é‡ç›‘æ§æ¨¡å¼ï¼‰
      #   â€¢ æ¨é€æ—¶æœºï¼šæœ‰æ–°å¢æ‰æ¨é€
      #   â€¢ æ˜¾ç¤ºå†…å®¹ï¼šæ–°å‡ºç°çš„åŒ¹é…é¢‘ç‡è¯æ–°é—»
      #   â€¢ é€‚ç”¨åœºæ™¯ï¼šé¿å…é‡å¤ä¿¡æ¯å¹²æ‰°

      # æ¨é€æ¨¡å¼é€‰æ‹©
      report:
        mode: "daily" # å¯é€‰: "daily"|"incremental"|"current"
        rank_threshold: 5 # æ’åé«˜äº®é˜ˆå€¼

      notification:
        enable_notification: true # æ˜¯å¦å¯ç”¨é€šçŸ¥åŠŸèƒ½ï¼Œå¦‚æœ falseï¼Œåˆ™ä¸å‘é€æ‰‹æœºé€šçŸ¥
        message_batch_size: 4000 # æ¶ˆæ¯åˆ†æ‰¹å¤§å°ï¼ˆå­—èŠ‚ï¼‰(è¿™ä¸ªé…ç½®åˆ«åŠ¨)
        dingtalk_batch_size: 20000 # é’‰é’‰æ¶ˆæ¯åˆ†æ‰¹å¤§å°ï¼ˆå­—èŠ‚ï¼‰(è¿™ä¸ªé…ç½®ä¹Ÿåˆ«åŠ¨)
        feishu_batch_size: 29000 # é£ä¹¦æ¶ˆæ¯åˆ†æ‰¹å¤§å°ï¼ˆå­—èŠ‚ï¼‰
        batch_send_interval: 3 # æ‰¹æ¬¡å‘é€é—´éš”ï¼ˆç§’ï¼‰
        feishu_message_separator: "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" # feishu æ¶ˆæ¯åˆ†å‰²çº¿

      # ğŸ• æ¨é€æ—¶é—´çª—å£æ§åˆ¶ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
      # ç”¨é€”ï¼šé™åˆ¶æ¨é€çš„æ—¶é—´èŒƒå›´ï¼Œé¿å…éå·¥ä½œæ—¶é—´æ‰“æ‰°
      # é€‚ç”¨åœºæ™¯ï¼š
      #   - åªæƒ³åœ¨å·¥ä½œæ—¥ç™½å¤©æ¥æ”¶æ¨é€ï¼ˆå¦‚ 09:00-18:00ï¼‰
      #   - å¸Œæœ›åœ¨æ™šä¸Šå›ºå®šæ—¶é—´æ”¶åˆ°æ±‡æ€»ï¼ˆå¦‚ 20:00-22:00ï¼‰
      push_window:
        enabled: true  # æ˜¯å¦å¯ç”¨æ¨é€æ—¶é—´çª—å£æ§åˆ¶ï¼Œé»˜è®¤å…³é—­
        # æ³¨æ„ï¼šGitHub Actions æ‰§è¡Œæ—¶é—´ä¸ç¨³å®šï¼Œæ—¶é—´èŒƒå›´å»ºè®®è‡³å°‘ç•™è¶³ 2 å°æ—¶
        # å¦‚æœæƒ³è¦ç²¾å‡†çš„å®šæ—¶æ¨é€ï¼Œå»ºè®®ä½¿ç”¨ Docker éƒ¨ç½²åœ¨ä¸ªäººæœåŠ¡å™¨ä¸Š
        time_range:
          start: "08:00"  # æ¨é€æ—¶é—´çª—å£å¼€å§‹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
          end: "22:00"    # æ¨é€æ—¶é—´çª—å£ç»“æŸï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
        once_per_day: false  # æ¯å¤©åœ¨æ—¶é—´çª—å£å†…åªæ¨é€ä¸€æ¬¡ï¼Œå¦‚æœ falseï¼Œåˆ™çª—å£å†…æ¯æ¬¡æ‰§è¡Œéƒ½æ¨é€
        push_record_retention_days: 7  # æ¨é€è®°å½•ä¿ç•™å¤©æ•°

      # è¯·åŠ¡å¿…å¦¥å–„ä¿ç®¡å¥½ webhooksï¼Œä¸è¦å…¬å¼€
      # å¦‚æœä½ ä»¥ fork çš„æ–¹å¼å°†æœ¬é¡¹ç›®éƒ¨ç½²åœ¨ GitHub ä¸Šï¼Œè¯·å‹¿åœ¨æ­¤å¡«å†™ä»»ä½• webhooksï¼Œè€Œæ˜¯å°† webhooks å¡«å…¥ GitHub Secret
      # ä¸ç„¶è½»åˆ™æ‰‹æœºä¸Šæ”¶åˆ°å¥‡æ€ªçš„å¹¿å‘Šæ¨é€ï¼Œé‡åˆ™å­˜åœ¨æ›´ä¸¥é‡çš„å®‰å…¨éšæ‚£
      webhooks:
        feishu_url: "" # é£ä¹¦æœºå™¨äººçš„ webhook URL
        dingtalk_url: "" # é’‰é’‰æœºå™¨äººçš„ webhook URL
        wework_url: "" # ä¼ä¸šå¾®ä¿¡æœºå™¨äººçš„ webhook URL
        telegram_bot_token: "" # Telegram Bot Token
        telegram_chat_id: "" # Telegram Chat ID
        email_from: "" # å‘ä»¶äººé‚®ç®±åœ°å€
        email_password: "" # å‘ä»¶äººé‚®ç®±å¯†ç æˆ–æˆæƒç 
        email_to: "" # æ”¶ä»¶äººé‚®ç®±åœ°å€ï¼Œå¤šä¸ªæ”¶ä»¶äººç”¨é€—å·åˆ†éš”
        email_smtp_server: "" # SMTPæœåŠ¡å™¨åœ°å€ï¼ˆå¯é€‰ï¼Œç•™ç©ºè‡ªåŠ¨è¯†åˆ«ï¼‰
        email_smtp_port: "" # SMTPç«¯å£ï¼ˆå¯é€‰ï¼Œç•™ç©ºè‡ªåŠ¨è¯†åˆ«ï¼‰
        ntfy_server_url: "https://ntfy.sh" # ntfyæœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ä½¿ç”¨å…¬å…±æœåŠ¡ï¼Œå¯æ”¹ä¸ºè‡ªæ‰˜ç®¡åœ°å€
        ntfy_topic: "" # ntfyä¸»é¢˜åç§°
        ntfy_token: "" # ntfyè®¿é—®ä»¤ç‰Œï¼ˆå¯é€‰ï¼Œç”¨äºç§æœ‰ä¸»é¢˜ï¼‰

      # ç”¨äºè®©å…³æ³¨åº¦æ›´é«˜çš„æ–°é—»åœ¨æ›´å‰é¢æ˜¾ç¤ºï¼Œå³ç”¨ç®—æ³•é‡æ–°ç»„åˆä¸åŒå¹³å°çš„çƒ­æœæ’åºå½¢æˆä½ ä¾§é‡çš„çƒ­æœï¼Œåˆèµ·æ¥æ˜¯ 1 å°±è¡Œ
      weight:
        rank_weight: 0.4 # æ’åæƒé‡
        frequency_weight: 0.5 # é¢‘æ¬¡æƒé‡
        hotness_weight: 0.1 # çƒ­åº¦æƒé‡

      # name å¯ä»¥å®šä¹‰ä»»æ„åç§°ï¼Œåªå…·æœ‰æ˜¾ç¤ºä½œç”¨ï¼Œå³ä½¿é¡¹ç›®è¿è¡Œäº†å‡ å¤©åï¼Œå¿½ç„¶æ”¹æ‰ name ä¹Ÿä¸ä¼šå½±å“ä»£ç çš„æ­£å¸¸è¿è¡Œ
      platforms:
        - id: "toutiao"
          name: "ä»Šæ—¥å¤´æ¡"
        - id: "baidu"
          name: "ç™¾åº¦çƒ­æœ"
        - id: "wallstreetcn-hot"
          name: "åå°”è¡—è§é—»"
        - id: "thepaper"
          name: "æ¾æ¹ƒæ–°é—»"
        - id: "bilibili-hot-search"
          name: "bilibili çƒ­æœ"
        - id: "cls-hot"
          name: "è´¢è”ç¤¾çƒ­é—¨"
        - id: "ifeng"
          name: "å‡¤å‡°ç½‘"
        - id: "tieba"
          name: "è´´å§"
        - id: "weibo"
          name: "å¾®åš"
        - id: "douyin"
          name: "æŠ–éŸ³"
        - id: "zhihu"
          name: "çŸ¥ä¹"

---
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: wiki
  name: radar
spec:
  revisionHistoryLimit: 1
  selector:
    matchLabels:
      app: radar
  replicas: 1
  template:
    metadata:
      labels:
        app: radar
    spec:
      imagePullSecrets:
        - name: repo-secret
      volumes:
        - name: radar-config
          configMap:
            name: radar-config
      containers:
        - name: radar
          image: suoyuan-acr-registry-vpc.cn-shanghai.cr.aliyuncs.com/ansost/trend_radar:20251111150838
          volumeMounts:
            - name: radar-config
              mountPath: /app/config
          resources:
            requests:
              cpu: "0.2"
              memory: "64Mi"
            limits:
              cpu: "8"
              memory: "4096Mi"
          env:
            - name: TZ
              value: Asia/Shanghai
            - name: WEWORK_WEBHOOK_URL
              value: https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=78df9874-5b6e-47ff-bf28-312bf50dea00
            - name: CRON_SCHEDULE
              value: '*/30 * * * *'
            - name: RUN_MODE
              value: cron
            - name: IMMEDIATE_RUN
              value: 'true'
